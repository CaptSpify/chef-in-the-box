# Generated by Chef

# Authentication for passwd-file users. Included from auth.conf.
#
# passwd-like file with specified location.
# <doc/wiki/AuthDatabase.PasswdFile.txt>

<% if Dovecot::Auth.has_passdb?(@auth['passwdfile']) -%>
<%=  Dovecot::Conf.authdb('passwd-file', 'passdb', @auth['passwdfile']['passdb']) %>
<% else -%>
passdb {
  driver = passwd-file
  args = scheme=plain username_format=%u /etc/private/imap.passwd
}
<% end -%>

<% if Dovecot::Auth.has_userdb?(@auth['passwdfile']) -%>
<%=  Dovecot::Conf.authdb('passwd-file', 'userdb', @auth['passwdfile']['userdb']) %>
<% else -%>
userdb {
  driver = passwd-file
  args = username_format=%u /etc/dovecot/users
}
<% end -%>
